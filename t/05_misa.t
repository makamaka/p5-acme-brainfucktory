
use strict;
use Test::More tests => 2;
use Test::Output;
use utf8;

BEGIN { use_ok('Acme::Brainfucktory') };


# from http://homepage2.nifty.com/kujira_niku/okayu/misa.html

my $misa = Acme::Brainfucktory->new( {
    optable => {
        '>'                     => '>',
        '→'                    => '>',
        '～'                    => '>',
        'ー'                    => '>',
        '<'                 => '<',
        '←'                => '<',
        '★'                => '<',
        '☆'                => '<',
        '+'                     => '+',
        'あ'                    => '+',
        'ぁ'                    => '+',
        'お'                    => '+',
        'ぉ'                    => '+',
        '-'                   => '-',
        'っ'                  => '-',
        'ッ'                  => '-',
        '.'             => '.',
        '！'            => '.',
        ','             => ',',
        '？'            => ',',
        '['                     => '[',
        '「'                    => '[',
        '『'                    => '[',
        ']'     => ']',
        '」'    => ']',
        '』'    => ']',
    },
} );


$misa->code(<<CODE);
ごっ、ごぉおっ、ご～きげんよおぉおおぉおほっ。ほおぉおぉおっ。

「ごきげん☆みゃぁああ”あ”ぁ”ぁああ～っ」

さわやかな朝の☆ご挨拶！　お挨拶がっ。
澄みきった青空にこだましちゃうぉ～ああぉおおおぉん。

「は、はひっ、はろおぉっ☆わぁるどおおぉっぉ～っ」

こ、この文章は☆おサンプル！　おおぉおぉおおサンプルプログラム！！
どんなおプログラム言語でも基本のご挨拶させていただくのぉぉおッ！

「ぽうっ」

長々と書くのがこ、ここでの～、ここでのぉおおぉおぉぉおたしなみぃぃいぃ。

「長いぃ。長すぎましゅう。ご挨拶にこんなプログラム長すぎまひゅぅうぅ☆
　んおおぉぉ、ばかになる、おばかになっちゃいましゅ～ッ」

長いのがっ、バッファの奥まで入ってきましゅたぁあぁあっ！
ばっふぁ☆溢れちゃいまひゅぅ～。あみゃぁあ”あ”ぁ”ぁああ”あ”ぁぁ。

「で、出ます☆　んおおぉぉおおっ、エラー出ちゃいまひゅっ」

ほひぃ☆！　え、えらーっ、んお”お”ぉお”お”ぉおぉおおぉっっ。

「出た☆　出た出た出た出たぁぁあっ　えらあぴゅるーっって出たあぁっ」

はしたない☆！　ぉおおぉはしたないっ！　おはしたない言語ですっっっっっっっ！
おほっほおぉっっっほおぉっっっっっっっっっ！

「えらあらいしゅきぃぃぃいぃっっ」

止まらない　すごい　エラーみるく
こってりしたのがいっぱい出てるよぉぉぉおおぉぉおおぉぉおっっ。

「んほぉっ☆ っおぉぉぉおお国が分からなくなっちゃいまひゅう～っ」

ま、まだ出るぅ☆　出てるのおぉっ☆　エラーまだまだ出ましゅぅぅ！
ばんじゃ～ぁぁあい、ばんじゃいぃぃ、ばんにゃんじゃぁんじゃあぁぁああぁい！

CODE

stdout_is( sub { $misa->run }, "Hello\0World!\n", 'misa' );
